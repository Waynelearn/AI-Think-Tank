<!DOCTYPE html>
<html>
<head><title>Shuffle Test</title></head>
<body style="background:#111;color:#eee;font-family:sans-serif;padding:2rem;">
<h2>Shuffle Test Page</h2>
<div id="queue-display" style="margin:1rem 0;padding:1rem;background:#1a1d27;border-radius:8px;min-height:100px;"></div>
<button id="btn-test-shuffle" style="padding:0.8rem 1.5rem;font-size:1rem;cursor:pointer;background:#F39C12;border:none;border-radius:6px;color:#fff;">Shuffle Queue</button>
<div id="log" style="margin-top:1rem;font-size:0.85rem;color:#888;"></div>
<script>
let queue = [
    {name: "Dr. Nova", avatar: "ðŸ”¬", color: "#4A90D9"},
    {name: "Philosopher Phil", avatar: "ðŸ›ï¸", color: "#9B59B6"},
    {name: "Biz", avatar: "ðŸ“Š", color: "#27AE60"},
    {name: "Creatia", avatar: "ðŸŽ¨", color: "#E74C3C"},
    {name: "Devil's Advocate", avatar: "ðŸ˜ˆ", color: "#E67E22"},
    {name: "The Mediator", avatar: "âš–ï¸", color: "#1ABC9C"},
];

const display = document.getElementById("queue-display");
const log = document.getElementById("log");
let clickCount = 0;

function renderQueue() {
    display.innerHTML = queue.map((q, i) =>
        `<div style="padding:0.3rem 0.5rem;margin:0.2rem 0;border-left:3px solid ${q.color};background:#222;border-radius:4px;">
            ${i+1}. ${q.avatar} ${q.name}
        </div>`
    ).join("");
}

function shuffleQueue() {
    const mediatorIdx = queue.findIndex((q) => q.name === "The Mediator");
    let mediator = null;
    const others = [...queue];
    if (mediatorIdx !== -1) {
        mediator = others.splice(mediatorIdx, 1)[0];
    }
    for (let i = others.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [others[i], others[j]] = [others[j], others[i]];
    }
    queue = mediator ? [...others, mediator] : others;
    renderQueue();
}

document.getElementById("btn-test-shuffle").addEventListener("click", () => {
    clickCount++;
    const before = queue.map(q => q.name).join(", ");
    shuffleQueue();
    const after = queue.map(q => q.name).join(", ");
    log.innerHTML += `<div>Click ${clickCount}: ${before} â†’ ${after}</div>`;
});

renderQueue();
</script>
</body>
</html>
